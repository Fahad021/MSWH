

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mswh.tools.plots &mdash; Multiscale Solar Water Heating 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Multiscale Solar Water Heating
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../source/models.html">Multiscale Solar Water Heating (MSWH)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../source/modules.html">Python Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../source/legal.html">Copyright Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../source/legal.html#license-agreement">License Agreement</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Multiscale Solar Water Heating</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>mswh.tools.plots</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for mswh.tools.plots</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="k">import</span> <span class="n">iplot</span><span class="p">,</span> <span class="n">init_notebook_mode</span>

<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">plotly.io</span> <span class="k">as</span> <span class="nn">pio</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>


<div class="viewcode-block" id="Plot"><a class="viewcode-back" href="../../../source/mswh.tools.html#mswh.tools.plots.Plot">[docs]</a><span class="k">class</span> <span class="nc">Plot</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates and saves plots to visualize and</span>
<span class="sd">    correlate arrays, usually timeseries</span>

<span class="sd">    Parameters:</span>

<span class="sd">        title: str</span>
<span class="sd">            Plot title</span>

<span class="sd">        data_headers: list</span>
<span class="sd">            A list of labels in the same order as the corresponding data</span>
<span class="sd">            If None the labels will be the df column labels, or integer</span>
<span class="sd">            indices if a list got provided</span>

<span class="sd">        label_h: str</span>
<span class="sd">            Horizontal axis label</span>

<span class="sd">        label_v: str</span>
<span class="sd">            Vertical axis label</span>

<span class="sd">        legend: boolean</span>
<span class="sd">            Plot the legend or not</span>

<span class="sd">        save_image: boolean</span>
<span class="sd">            If True saves the created image with either</span>
<span class="sd">            a given or default path and filename. Supported</span>
<span class="sd">            file types are &#39;png&#39; and &#39;pdf&#39;, as specified in</span>
<span class="sd">            the filename.</span>

<span class="sd">        duration_curve: boolean</span>
<span class="sd">            If True it sorts the columns (df or arrays)</span>
<span class="sd">            and plots the duration_curve, returns a</span>
<span class="sd">            duration_curve metric as a real</span>

<span class="sd">        outpath: string or &#39;&#39; (for current directory)</span>
<span class="sd">            Path to save the png image of the plot</span>

<span class="sd">        boxmean: True, False, &#39;sd&#39;, &#39;Only Mean&#39;</span>

<span class="sd">        notebook_mode: boolean</span>
<span class="sd">            Plot in the notebook if True</span>

<span class="sd">        width: int</span>
<span class="sd">            Image width</span>

<span class="sd">        height: int</span>
<span class="sd">            Image height</span>

<span class="sd">        fontsize: int</span>
<span class="sd">            Axis label font size</span>

<span class="sd">    Returns:</span>

<span class="sd">        fig: plotly figure if self.interactive</span>
<span class="sd">              else True</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label_h</span><span class="o">=</span><span class="s1">&#39;Time [h]&#39;</span><span class="p">,</span>
                 <span class="n">label_v</span><span class="o">=</span><span class="s1">&#39;Component performance&#39;</span><span class="p">,</span>
                 <span class="n">data_headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">save_image</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">outpath</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">duration_curve</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">boxmode</span><span class="o">=</span><span class="s1">&#39;group&#39;</span><span class="p">,</span>
                 <span class="n">notebook_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
                 <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">legend_x</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">legend_y</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span>
                 <span class="n">margin_l</span><span class="o">=</span><span class="mf">200.</span><span class="p">,</span> <span class="n">margin_b</span><span class="o">=</span><span class="mf">200.</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data_headers</span> <span class="o">=</span> <span class="n">data_headers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_image</span> <span class="o">=</span> <span class="n">save_image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outpath</span> <span class="o">=</span> <span class="n">outpath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interactive</span> <span class="o">=</span> <span class="n">notebook_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration_curve</span> <span class="o">=</span> <span class="n">duration_curve</span>

        <span class="c1"># plot formatting, see</span>
        <span class="c1"># https://plot.ly/python/reference/#layout-titlefont</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
            <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                <span class="n">family</span><span class="o">=</span><span class="s1">&#39;arial&#39;</span><span class="p">),</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">titlefont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span> <span class="o">*</span> <span class="mf">1.</span><span class="p">,</span>
                <span class="n">family</span><span class="o">=</span><span class="s1">&#39;arial&#39;</span><span class="p">),</span>
            <span class="n">xaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="n">label_h</span><span class="p">,</span>
                <span class="n">titlefont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="c1">#family=&#39;Courier New, monospace&#39;,</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7f7f7f&#39;</span><span class="p">),</span>
                <span class="n">tickfont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span> <span class="o">*</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span>
                <span class="p">),</span>
            <span class="n">yaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="n">label_v</span><span class="p">,</span>
                <span class="n">titlefont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="c1">#family=&#39;Courier New, monospace&#39;,</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7f7f7f&#39;</span><span class="p">),</span>
                <span class="n">tickfont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span> <span class="o">*</span> <span class="o">.</span><span class="mi">6</span><span class="p">)),</span>
            <span class="n">showlegend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="n">margin_l</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">margin_b</span><span class="p">),</span>
            <span class="n">legend</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">legend_x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">legend_y</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">family</span><span class="o">=</span><span class="s1">&#39;arial&#39;</span><span class="p">,</span>
                <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">boxlayout</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
            <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                <span class="n">family</span><span class="o">=</span><span class="s1">&#39;arial&#39;</span><span class="p">),</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">titlefont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">,</span>
                <span class="n">family</span><span class="o">=</span><span class="s1">&#39;arial&#39;</span><span class="p">),</span>
            <span class="n">xaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="n">label_h</span><span class="p">,</span>
                <span class="n">titlefont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="c1">#family=&#39;Courier New, monospace&#39;,</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7f7f7f&#39;</span><span class="p">),</span>
                <span class="n">tickfont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="o">*.</span><span class="mi">8</span><span class="p">)),</span>
            <span class="n">yaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="n">label_v</span><span class="p">,</span>
                <span class="n">titlefont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="c1">#family=&#39;Courier New, monospace&#39;,</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7f7f7f&#39;</span><span class="p">),</span>
                <span class="n">tickfont</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">fontsize</span> <span class="o">*</span> <span class="o">.</span><span class="mi">8</span><span class="p">)),</span>
            <span class="n">showlegend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="n">margin_l</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">margin_b</span><span class="p">),</span>
            <span class="n">legend</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">legend_x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">legend_y</span><span class="p">),</span>
            <span class="n">boxmode</span><span class="o">=</span><span class="n">boxmode</span><span class="p">)</span>

<div class="viewcode-block" id="Plot.scatter"><a class="viewcode-back" href="../../../source/mswh.tools.html#mswh.tools.plots.Plot.scatter">[docs]</a>    <span class="k">def</span> <span class="nf">scatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;scatter.png&#39;</span><span class="p">,</span>
                <span class="n">modes</span><span class="o">=</span><span class="s1">&#39;lines+markers&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a scatter plot</span>

<span class="sd">        Parameters:</span>

<span class="sd">            data: array/list, pd series, list of arrays/lists, pd df</span>
<span class="sd">                Provide a list or arrays/lists or a pandas dataframe.</span>
<span class="sd">                The variables should be ordered in pairs such that</span>
<span class="sd">                each odd variable in the list/first column in the df</span>
<span class="sd">                gets assigned to the horizontal axis, each even</span>
<span class="sd">                variable to the vertical axes. Each pair needs</span>
<span class="sd">                to have the same length, but pairs can be of</span>
<span class="sd">                a different length.</span>

<span class="sd">            outfile: str</span>
<span class="sd">                Filename, include .png, .png .pdf</span>

<span class="sd">            modes: str or list of str</span>
<span class="sd">                &#39;markers&#39;, &#39;lines&#39;, &#39;lines + markers&#39; or</span>
<span class="sd">                a list of the above to assign to each plot</span>
<span class="sd">                (one string in a list for each pair of data)</span>

<span class="sd">        Returns:</span>

<span class="sd">            fig: plotly figure if self.interactive</span>
<span class="sd">                  else True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># some input format error handling, not exhaustive</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Provide at least two arrays or columns to&#39;</span> \
                  <span class="s1">&#39;create a scatter plot. Or try Series plot &#39;</span> \
                  <span class="s1">&#39;for a single column of data versus its index.&#39;</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">))</span> <span class="ow">or</span> \
            <span class="p">((</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Provide a dataframe with no less than two&#39;</span> \
                  <span class="s1">&#39;columns. Series plot can plot a single column&#39;</span> \
                  <span class="s1">&#39;against its index.&#39;</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span>

        <span class="c1"># rectangles the data if passed as a list of lists/arrays</span>
        <span class="c1"># if some of the lists/arrays are shorter, the gaps are</span>
        <span class="c1"># filled with np.nan</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">df_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)),</span>
                               <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

            <span class="n">col_inx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">i_list</span> <span class="o">=</span> <span class="n">i</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">i_list</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="n">df_data</span><span class="p">[</span><span class="n">col_inx</span><span class="p">]</span> <span class="o">=</span> <span class="n">i_list</span> <span class="o">+</span> \
                    <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">df_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="n">col_inx</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">df_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration_curve</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">col_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">df_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">col_index</span><span class="p">]</span> <span class="o">=</span> \
                    <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="n">col_index</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
                    <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_headers</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_headers</span>

        <span class="n">num_columns</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">modes</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">list_modes</span> <span class="o">=</span> <span class="p">[</span><span class="n">modes</span><span class="p">]</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_columns</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">list_modes</span> <span class="o">=</span> <span class="n">modes</span>

        <span class="k">if</span> <span class="n">num_columns</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Provide an even number of columns,&#39;</span> \
                  <span class="s1">&#39;e.g. [x1, y1, x2, y2, ...]&#39;</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span>

        <span class="n">plot_data</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">col_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_columns</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">plot_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">col_index</span><span class="p">],</span>
                <span class="n">y</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">col_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
                <span class="n">mode</span><span class="o">=</span><span class="n">list_modes</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">col_index</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">)],</span>
                <span class="n">name</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">col_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span>


        <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">plot_data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_image</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">outpath</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outpath</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outpath</span><span class="p">)</span>
            <span class="n">pio</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outpath</span><span class="p">,</span> <span class="n">outfile</span><span class="p">))</span>


        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interactive</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">fig</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Interactive mode failed.&#39;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Plot.series"><a class="viewcode-back" href="../../../source/mswh.tools.html#mswh.tools.plots.Plot.series">[docs]</a>    <span class="k">def</span> <span class="nf">series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">index_in_a_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;series.png&#39;</span><span class="p">,</span> <span class="n">modes</span><span class="o">=</span><span class="s1">&#39;lines+markers&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plots all series data against either the index or the first</span>
<span class="sd">        provided series. It can sort the data and plot the duration_curve.</span>

<span class="sd">        Parameters:</span>

<span class="sd">            data: array/list, pd series, list of arrays/lists, pd df</span>
<span class="sd">                Provide an array or a list if plotting a single</span>
<span class="sd">                variable. If plotting multiple variables provide</span>
<span class="sd">                a list of arrays or a pandas dataframe.</span>
<span class="sd">                Horizontal axis corresponds to:</span>

<span class="sd">                    * if pd df: the index of the dataframe or the first columns of the dataframe</span>
<span class="sd">                    * if list or arrays/lists: a range or array lenth or the first array/list in the list</span>

<span class="sd">                All arrays in the list need to have the same length.</span>

<span class="sd">            index_in_a_column: boolean</span>
<span class="sd">                Horizontal axis labels</span>
<span class="sd">                If None, dataframe index is used, otherwise pass a</span>
<span class="sd">                column label for a column (it will not be considered</span>
<span class="sd">                as a series to plot)</span>

<span class="sd">            outfile: str</span>
<span class="sd">                Filename, include .png, .png .pdf</span>

<span class="sd">            modes: str or list of str</span>
<span class="sd">                &#39;markers&#39;, &#39;lines&#39;, &#39;lines+markers&#39; or</span>
<span class="sd">                a list of the above to assign to each column</span>
<span class="sd">                of data, excluding the first column if</span>
<span class="sd">                index_in_a_column is not None</span>

<span class="sd">        Returns:</span>

<span class="sd">            fig: plotly figure if self.interactive</span>
<span class="sd">                else True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># rectangles the data if passed as a list of lists/arrays</span>
        <span class="c1"># if some of the lists/arrays are shorter, the gaps are</span>
        <span class="c1"># filled with np.nan</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">df_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>\
                <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)),</span>
                                 <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

            <span class="n">col_inx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                    <span class="n">df_data</span><span class="p">[</span><span class="n">col_inx</span><span class="p">]</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span>
                            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">df_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">df_data</span><span class="p">[</span><span class="n">col_inx</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span>
                        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">df_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="n">col_inx</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">df_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">index_in_a_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels_h_axis</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">index_in_a_column</span><span class="p">]</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">index_in_a_column</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels_h_axis</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_headers</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_headers</span>

        <span class="n">num_columns</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">modes</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">list_modes</span> <span class="o">=</span> <span class="p">[</span><span class="n">modes</span><span class="p">]</span> <span class="o">*</span> <span class="n">num_columns</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">list_modes</span> <span class="o">=</span> <span class="n">modes</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration_curve</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">col_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_columns</span><span class="p">):</span>
                <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">col_index</span><span class="p">]</span> <span class="o">=</span> \
                    <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">col_index</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>\
                    <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

        <span class="n">plot_data</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">col_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_columns</span><span class="p">):</span>
            <span class="n">plot_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">labels_h_axis</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">col_index</span><span class="p">],</span>
                <span class="n">mode</span><span class="o">=</span><span class="n">list_modes</span><span class="p">[</span><span class="n">col_index</span><span class="p">],</span>
                <span class="n">name</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">col_index</span><span class="p">]))</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">plot_data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_image</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">outpath</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outpath</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outpath</span><span class="p">)</span>
            <span class="n">pio</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outpath</span><span class="p">,</span> <span class="n">outfile</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interactive</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">fig</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Interactive mode failed.&#39;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span>

        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Plot.box"><a class="viewcode-back" href="../../../source/mswh.tools.html#mswh.tools.plots.Plot.box">[docs]</a>    <span class="k">def</span> <span class="nf">box</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dfs</span><span class="p">,</span> <span class="n">plot_cols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">groupby_cols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">df_cat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;box.png&#39;</span><span class="p">,</span> <span class="n">boxmean</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;#3D9970&#39;</span><span class="p">,</span> <span class="s1">&#39;#FF4136&#39;</span><span class="p">,</span> <span class="s1">&#39;#FF851B&#39;</span><span class="p">],</span>
            <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Energy Use&#39;</span><span class="p">,</span>
            <span class="n">boxpoints</span><span class="o">=</span><span class="s1">&#39;outliers&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates box plots for the chosen plot_col and can</span>
<span class="sd">        group plots by the groupby_col.</span>

<span class="sd">        Parameters:</span>

<span class="sd">            dfs: list of dfs</span>

<span class="sd">            df_cat: list of str</span>
<span class="sd">                Indicator of the category carried by the dfs</span>
<span class="sd">                (E.g. the dfs differ by housing type)</span>

<span class="sd">            plot_col: list of columns to plot, one from each df in</span>
<span class="sd">                dfs. If multiple dfs are passed, the values will be</span>
<span class="sd">                shown as groups on the plot</span>

<span class="sd">            groupby_cols: list of cols to use as x axis, from each</span>
<span class="sd">                df. Use the same column if it has the same elements.</span>
<span class="sd">                Use None if x axis category not used</span>

<span class="sd">            boxpoints: False, &#39;all&#39;, &#39;outliers&#39;, &#39;suspectedoutliers&#39;</span>
<span class="sd">                See https://plot.ly/python/reference/#box</span>

<span class="sd">        Returns:</span>

<span class="sd">            fig: plotly figure if self.interactive</span>
<span class="sd">                else True</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Extract y values</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">df_ctg</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">dfs</span><span class="p">:</span>

            <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">plot_cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">((</span><span class="n">groupby_cols</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span>
                <span class="p">(</span><span class="n">groupby_cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)):</span>
                <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">groupby_cols</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">df_cat</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">df_ctg</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_cat</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">df_ctg</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

            <span class="n">trace</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Box</span><span class="p">(</span>
                <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                <span class="n">name</span><span class="o">=</span><span class="n">plot_cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="n">df_ctg</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                <span class="n">boxpoints</span><span class="o">=</span><span class="n">boxpoints</span><span class="p">,</span>
                <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
                <span class="n">boxmean</span><span class="o">=</span><span class="n">boxmean</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">boxlayout</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_image</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">outpath</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outpath</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outpath</span><span class="p">)</span>
            <span class="n">pio</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outpath</span><span class="p">,</span> <span class="n">outfile</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interactive</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">fig</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Interactive mode failed.&#39;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span>

        <span class="k">return</span> <span class="kc">True</span></div></div>


<span class="c1"># size and color modes:</span>
<span class="c1">#   .........</span>
<span class="c1">#                mode=&#39;markers&#39;,</span>
<span class="c1">#                marker={&#39;size&#39;: sz,</span>
<span class="c1">#                        &#39;color&#39;: colors,</span>
<span class="c1">#                        &#39;opacity&#39;: 0.6,</span>
<span class="c1">#                        &#39;colorscale&#39;: &#39;Viridis&#39;</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 
Multiscale Solar Water Heating (MSWH) Copyright (c) 2019, The
Regents of the University of California, through Lawrence Berkeley National
Laboratory (subject to receipt of any required approvals from the U.S.
Dept. of Energy).  All rights reserved.

If you have questions about your rights to use or distribute this software,
please contact Berkeley Lab&#39;s Intellectual Property Office at
IPO@lbl.gov.

NOTICE.  This Software was developed under funding from the U.S. Department
of Energy and the U.S. Government consequently retains certain rights.  As
such, the U.S. Government has been granted for itself and others acting on
its behalf a paid-up, nonexclusive, irrevocable, worldwide license in the
Software to reproduce, distribute copies to the public, prepare derivative
works, and perform publicly and display publicly, and to permit other to do
so.


    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>